(()=>{"use strict";var t=function(){function t(t,i,e){this.max=i,this.min=t,this.delta=e,this.value=Math.floor((this.max-this.min)/2)+this.min,this.oscillation=!0}return t.prototype.update=function(){this.value+=this.delta,!0===this.oscillation&&(this.value<=this.min&&this.delta<0||this.value>=this.max&&this.delta>0)&&(this.delta=-this.delta),this.value<this.min&&(this.value=this.min),this.value>this.max&&(this.value=this.max)},t.prototype.getValue=function(){return this.value},t.prototype.setDelta=function(t){this.delta=t},t.prototype.setMax=function(t){this.max=t},t.prototype.setMin=function(t){this.min=t},t.prototype.setValue=function(t){this.value=t},t.prototype.setOscillation=function(t){this.oscillation=t},t}(),i=function(){function t(t,i){this.x=t,this.y=i}return t.prototype.rotate=function(t){var i,e,s,n,o;o=-t*(Math.PI/180),s=Math.cos(o),n=Math.sin(o),i=this.x,e=this.y,this.x=i*s-e*n,this.y=i*n+e*s},t.prototype.add=function(t){this.x+=t.x,this.y+=t.y},t.prototype.sub=function(t){this.x-=t.x,this.y-=t.y},t.prototype.scale=function(t){this.x*=t,this.y*=t},t.prototype.normalize=function(){var t;0!==(t=this.magnitude())&&(this.x=this.x/t,this.y=this.y/t)},t.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.distanceTo=function(t){var i=this.clone();return i.sub(t),i.magnitude()},t.prototype.clone=function(){return new t(this.x,this.y)},t}(),e=function(){function e(e,s){this.alive=!0,this.context=e,this.lineWidth=new t(1,3,.01),this.radius=new t(4,6,.02),this.pos=new i(Math.floor(Math.random()*s.x-60)+30,Math.floor(Math.random()*s.y-60)+30)}return e.prototype.update=function(){this.lineWidth.update(),console.log(this.lineWidth.getValue()),this.radius.update()},e.prototype.draw=function(){var t;(t=this.context).lineCap="round",t.lineJoin="round",t.strokeStyle="white",t.lineWidth=this.lineWidth.getValue(),t.beginPath(),t.arc(this.pos.x,this.pos.y,this.radius.getValue(),0,2*Math.PI),t.stroke()},e.prototype.explode=function(){this.alive=!1,this.lineWidth.setOscillation(!1),this.lineWidth.setMin(1e-4),this.lineWidth.setDelta(-.01),this.radius.setMax(99999),this.radius.setDelta(1)},e.prototype.touchedByTurtle=function(t){return!1!==this.alive&&(this.pos.distanceTo(t.getPos())<=Math.floor(this.radius.getValue()/2)+Math.floor(t.getWidth())?(this.explode(),!0):void 0)},e}(),s=function(){function t(t,e){this.angle=45,this.baseDirection=new i(0,1),this.context=t,this.length=16,this.pos=e,this.speed=.8,this.steerSpeed=9,this.width=10}return t.prototype.update=function(t){var i;(i=this.baseDirection.clone()).rotate(this.angle),i.normalize(),i.scale(this.speed*t*.1),this.pos.add(i)},t.prototype.draw=function(){var t,i,e,s;(t=this.context).lineCap="round",t.lineJoin="round",t.strokeStyle="white",t.lineWidth=this.width,(i=this.baseDirection.clone()).rotate(this.angle),i.normalize(),i.scale(this.length/2),(e=this.pos.clone()).sub(i),(s=this.pos.clone()).add(i),t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(s.x,s.y),t.stroke()},t.prototype.turnLeft=function(){this.angle+=this.steerSpeed,this.angle>360&&(this.angle-=360)},t.prototype.turnRight=function(){this.angle-=this.steerSpeed,this.angle<0&&(this.angle=360+this.angle)},t.prototype.getPos=function(){return this.pos},t.prototype.getWidth=function(){return this.width},t}(),n=new(function(){function t(t){this.canvas=t,this.context=t.getContext("2d"),this.isPaused=!1,this.lastUpdate=Date.now();var n=Math.floor(this.canvas.width/2),o=Math.floor(this.canvas.height/2);this.turtle=new s(this.context,new i(n,o));var h=new i(this.canvas.width,this.canvas.height);this.coins=[new e(this.context,h),new e(this.context,h),new e(this.context,h)],this.resume()}return t.prototype.update=function(){var t,i,e=this;i=(t=Date.now())-this.lastUpdate,this.turtle.update(i),this.clearCanvas(),this.turtle.draw();for(var s=function(t){n.coins[t].update(),n.coins[t].draw(),n.coins[t].touchedByTurtle(n.turtle)&&setTimeout((function(){e.removeCoin(e.coins[t])}),1e3)},n=this,o=0;o<this.coins.length;o++)s(o);this.fps=1e3/i,this.lastUpdate=t},t.prototype.removeCoin=function(t){var i;for(i=0,console.log(this.coins);this.coins[i]!=t;)i+=1;i<this.coins.length&&(console.log(i),this.coins.splice(i,1)),console.log(this.coins)},t.prototype.clearCanvas=function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.pause=function(){this.isPaused=!0,clearInterval(this.interval)},t.prototype.resume=function(){var t=this;this.isPaused=!1,this.lastUpdate=Date.now(),this.interval=setInterval((function(){return t.update()}),1)},t.prototype.keyDown=function(t){"Space"===t&&(!0===this.isPaused?this.resume():this.pause()),"ArrowLeft"===t&&this.turtle.turnLeft(),"ArrowRight"===t&&this.turtle.turnRight()},t.prototype.keyUp=function(t){},t.prototype.getFPS=function(){return this.fps},t}())(document.getElementById("canvas"));window.addEventListener("keydown",(function(t){n.keyDown(t.code)}),!1),window.addEventListener("keyup",(function(t){n.keyUp(t.code)}),!1)})();