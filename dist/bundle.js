(()=>{"use strict";var t=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.rotate=function(t){var e,i,n,s,o;o=-t*(Math.PI/180),n=Math.cos(o),s=Math.sin(o),e=this.x,i=this.y,this.x=e*n-i*s,this.y=e*s+i*n},t.prototype.add=function(t){this.x+=t.x,this.y+=t.y},t.prototype.sub=function(t){this.x-=t.x,this.y-=t.y},t.prototype.scale=function(t){this.x*=t,this.y*=t},t.prototype.normalize=function(){var t;0!==(t=this.magnitude())&&(this.x=this.x/t,this.y=this.y/t)},t.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.distanceTo=function(t){var e=this.clone();return e.sub(t),e.magnitude()},t.prototype.clone=function(){return new t(this.x,this.y)},t}(),e=function(){function e(e,i){this.context=e,this.size=5,this.pos=new t(Math.floor(Math.random()*i.x-60)+30,Math.floor(Math.random()*i.y-60)+30)}return e.prototype.draw=function(){var t;(t=this.context).lineCap="round",t.lineJoin="round",t.strokeStyle="black",t.lineWidth=this.size,t.beginPath(),t.moveTo(this.pos.x,this.pos.y),t.lineTo(this.pos.x,this.pos.y),t.stroke()},e.prototype.touchedByTurtle=function(t){if(this.pos.distanceTo(t.getPos())<=Math.floor(this.size/2)+Math.floor(t.getWidth()))return!0},e}(),i=function(){function e(e,i){this.angle=45,this.baseDirection=new t(0,1),this.context=e,this.length=10,this.pos=i,this.speed=.8,this.steerSpeed=10,this.width=5}return e.prototype.update=function(t){var e;(e=this.baseDirection.clone()).rotate(this.angle),e.normalize(),e.scale(this.speed*t*.1),this.pos.add(e)},e.prototype.draw=function(){var t,e,i,n;(t=this.context).lineCap="round",t.lineJoin="round",t.strokeStyle="black",t.lineWidth=this.width,(e=this.baseDirection.clone()).rotate(this.angle),e.normalize(),e.scale(this.length/2),(i=this.pos.clone()).sub(e),(n=this.pos.clone()).add(e),t.beginPath(),t.moveTo(i.x,i.y),t.lineTo(n.x,n.y),t.stroke()},e.prototype.turnLeft=function(){this.angle+=this.steerSpeed,this.angle>360&&(this.angle-=360)},e.prototype.turnRight=function(){this.angle-=this.steerSpeed,this.angle<0&&(this.angle=360+this.angle)},e.prototype.getPos=function(){return this.pos},e.prototype.getWidth=function(){return this.width},e}(),n=new(function(){function n(n){this.canvas=n,this.context=n.getContext("2d"),this.isPaused=!1,this.lastUpdate=Date.now();var s=Math.floor(this.canvas.width/2),o=Math.floor(this.canvas.height/2);this.turtle=new i(this.context,new t(s,o));var h=new t(this.canvas.width,this.canvas.height);this.coins=[new e(this.context,h),new e(this.context,h),new e(this.context,h)],this.resume()}return n.prototype.update=function(){var t,e,i,n=this;e=(t=Date.now())-this.lastUpdate,this.turtle.update(e),this.clearCanvas(),this.turtle.draw(),i=[];for(var s=0;s<this.coins.length;s++)this.coins[s].draw(),this.coins[s].touchedByTurtle(this.turtle)&&i.push(s);i.forEach((function(t){return n.coins.splice(t,1)})),this.fps=1e3/e,this.lastUpdate=t},n.prototype.clearCanvas=function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},n.prototype.pause=function(){this.isPaused=!0,clearInterval(this.interval),console.log(this.interval)},n.prototype.resume=function(){var t=this;this.isPaused=!1,this.lastUpdate=Date.now(),this.interval=setInterval((function(){return t.update()}),1)},n.prototype.keyDown=function(t){"Space"===t&&(!0===this.isPaused?this.resume():this.pause()),"ArrowLeft"===t&&this.turtle.turnLeft(),"ArrowRight"===t&&this.turtle.turnRight()},n.prototype.keyUp=function(t){},n.prototype.getFPS=function(){return this.fps},n}())(document.getElementById("canvas"));window.addEventListener("keydown",(function(t){n.keyDown(t.code)}),!1),window.addEventListener("keyup",(function(t){n.keyUp(t.code)}),!1)})();